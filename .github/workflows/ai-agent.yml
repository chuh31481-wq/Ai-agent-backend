name: 🚀 AI Agent Project Builder
on:
  workflow_dispatch:
    inputs:
      project_goal:
        description: 'What project should I build?'
        required: true
        default: 'Create a simple calculator web app'
      project_type:
        description: 'Type of project'
        required: true
        default: 'web-app'
        type: choice
        options:
          - web-app
          - api
          - full-stack

jobs:
  build-project:
    runs-on: ubuntu-latest
    steps:
    - name: 🎯 Checkout repository
      uses: actions/checkout@v4
      
    - name: ⚙️ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'
        
    - name: 📦 Install dependencies
      run: npm install
      
    - name: 🏗️ Run AI Agent
      env:
        AGENT_GOAL: ${{ inputs.project_goal }}
        GEMINI_API_KEY_1: ${{ secrets.GEMINI_API_KEY_1 }}
        GEMINI_API_KEY_2: ${{ secrets.GEMINI_API_KEY_2 }}
      run: |
        echo "Starting AI Agent with goal: $AGENT_GOAL"
        timeout 1800 npm start || echo "Process completed or timed out"
        
    - name: 📁 Upload generated project
      uses: actions/upload-artifact@v4
      with:
        name: ai-generated-project
        path: |
          *
          !node_modules/
        retention-days: 7
